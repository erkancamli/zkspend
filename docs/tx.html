<!doctype html><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>zkSpend – Tx Viewer (0G Galileo)</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;max-width:980px;margin:40px auto;padding:0 16px}
  header{display:flex;gap:8px;align-items:center}
  input,button{font:inherit;padding:10px;border:1px solid #ddd;border-radius:10px}
  pre{background:#0b1220;color:#d1e6ff;padding:14px;border-radius:12px;overflow:auto}
  .ok{color:#0a0}
  .bad{color:#c00}
</style>
<header>
  <h2 style="margin:0">Tx Receipt</h2>
</header>
<p>
  RPC:
  <input id="rpc" size="60"
    value="https://evmrpc-testnet.0g.ai">
</p>
<p>
  Tx:
  <input id="tx" size="64" placeholder="0x...">
  <button id="load">Load</button>
</p>
<div id="meta"></div>
<pre id="json"></pre>
<script>
const CLAIMED_SIG = "0xcbcb845d94d59960a0c6e8b3a1f47ad81bb57269de43e89ff4f0fa656246f5f6";
async function rpc(m, p){const r=await fetch(document.getElementById('rpc').value,{method:"POST",headers:{'content-type':'application/json'},body:JSON.stringify({jsonrpc:"2.0",id:1,method:m,params:p})});return (await r.json()).result}
function pp(x){return JSON.stringify(x,null,2)}
async function load(){
  const txh=document.getElementById('tx').value.trim();
  if(!txh) return;
  const rcp=await rpc("eth_getTransactionReceipt",[txh]);
  const succ=rcp && rcp.status==="0x1";
  document.getElementById('meta').innerHTML = succ? `<b class=ok>Success</b>` : `<b class=bad>Failed</b>`;
  // Basit event çıkarımı
  const ev = (rcp?.logs||[]).find(l=>l.topics && l.topics[0]===CLAIMED_SIG);
  if(ev){
    const hex=(ev.data||"").replace(/^0x/,"");
    const rc ="0x"+hex.slice(0,64);
    const nul="0x"+hex.slice(64,128);
    document.getElementById('meta').innerHTML += ` · RC=${rc.slice(0,10)}… · NUL=${nul.slice(0,10)}…`;
  }
  document.getElementById('json').textContent = pp(rcp);
}
document.getElementById('load').onclick=load;
</script>
