<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>zkSpend · Live Claims</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;max-width:960px;margin:40px auto;padding:0 16px;background:#0b1220;color:#e6e9ef}
  .card{background:#0f172a;border:1px solid #2a3346;border-radius:12px;padding:14px;margin:10px 0}
  a{color:#8ab4ff}
  .muted{opacity:.7}
  code{background:#0b1220;border:1px solid #2a3346;padding:2px 6px;border-radius:6px}
</style>
<h2>zkSpend · Live Claims</h2>
<p class="muted">Data source: <code>claims/index.json</code> <small>(v0.2 storage stub)</small></p>
<div id="list" class="card">loading…</div>

<script>
async function main(){
  try{
    const r = await (async ()=>{ for (const u of ['claims/index.json','claims/index.json']) {   try { const r = await fetch(u, {cache:'no-store'}); if (r.ok) return r; } catch(e){} } return new Response(null, {status:404});})();
    if(!r.ok){ document.getElementById('list').textContent = "No claims yet."; return; }
    const items = await r.json();
    if(!Array.isArray(items) || items.length===0){
      document.getElementById('list').textContent = "No claims yet."; return;
    }
    const ul = document.createElement('ul');
    items.slice().reverse().forEach(it=>{
      const li = document.createElement('li');
      const a  = document.createElement('a');
      a.href   = "claims/"+it.tx+".json";
      a.textContent = it.tx.slice(0,10)+"…";
      a.target = "_blank";
      li.appendChild(a);
      li.appendChild(document.createTextNode(` · rc=${(it.rc||'').slice(0,10)}… · nul=${(it.nul||'').slice(0,10)}…`));
      ul.appendChild(li);
    });
    const box = document.getElementById('list'); box.innerHTML=""; box.appendChild(ul);
  }catch(e){
    document.getElementById('list').textContent = "Error: "+e.message;
  }
}
main();
</script>
